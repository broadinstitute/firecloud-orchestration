{
  "id": "https://api.firecloud.org/schemas/library-attributedefinitions-v1",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Library attribute definitions, v1",
  "description": "Constraints, facet definitions, and display definitions for FireCloud Library",
  "type": "object",
  "properties": {
    "datasetName": {
      "title": "Dataset Name",
      "type": "string"
    },
    "datasetDescription": {
      "title": "Dataset Description",
      "type": "string"
    },
    "datasetCustodian":
    {
      "title": "Dataset Custodian",
      "type": "string"
    },
    "datasetDepositor": {
      "title": "Dataset Depositor",
      "type": "string"
    },
    "datasetOwner": {
      "title": "Dataset Owner",
      "type": "string"
    },
    "institute": {
      "title": "Research Institute",
      "type": "array",
      "items": { "type": "string" }
    },
    "indication": {
      "title": "Cohort Phenotype/Indication",
      "type": "string"
    },
    "numSubjects": {
      "title": "No. of Subjects",
      "type": "integer",
      "minimum": 0,
      "default": 0
    },
    "projectName": {
      "title": "Project/s Name",
      "type": "string"
    },
    "datatype": {
      "title": "Data Type/s",
      "type": "array",
      "items": { "type": "string" }
    },
    "reference": {
      "title": "Genome Reference Version",
      "type": "string"
    },
    "dataFileFormats": {
      "title": "Data File Formats",
      "type": "array",
      "items": { "type": "string" }
    },
    "technology": {
      "title": "Profiling Instrument Type",
      "type": "array",
      "items": { "type": "string" }
    },
    "profilingProtocol": {
      "title": "Profiling Protocol",
      "type": "array",
      "items": { "type": "string" }
    },
    "dataUseRestriction": {
      "title": "Data Use Restriction",
      "type": "string"
    },
    "dataUseBSPSampleCollectionID": {
      "title": "BSP Sample Collection ID",
      "type": "string"
    },
    "studyDesign": {
      "title": "Study Design",
      "type": "string"
    },
    "cellType": {
      "title": "Cell Type",
      "type": "string"
    },
    "coverage": {
      "title": "Depth of Sequencing Coverage (Average)",
      "type": "string",
      "enum": ["0-10X","11x-20x","21x-30x","31x-100x","100x-150x",">150x"]
    },
    "ethnicity": {
      "title": "Ethnicity",
      "type": "array",
      "items": { "type": "string" }
    },
    "primaryDiseaseSite": {
      "title": "Primary Disease Site",
      "type": "string"
    },
    "broadInternalResearchProjectID": {
      "title": "Research Project Broad Internal ID",
      "type": "string"
    },
    "broadInternalResearchProjectName": {
      "title": "Research Project Broad Internal Name",
      "type": "string"
    },
    "broadInternalCohortName":{
      "title": "Cohort Name Broad Internal",
      "type": "string"
    },
    "broadInternalSeqProjectNumbers": {
      "title": "Seq Project Numbers",
      "type": "array",
      "items": { "type": "string" }
    },
    "GRU": {
      "title": "Data is available for future general research use",
      "type": "string",
      "enum": ["Yes", "No"],
      "consentCode": "GRU"
    },
    "HMB": {
      "title": "Future use is limited for health/medical/biomedical research",
      "type": "string",
      "enum": ["Yes", "No"],
      "consentCode": "HMB"
    },
    "DS": {
      "title": "Future use is limited to research involving the following disease area(s)",
      "type": "array",
      "items": { "type": "string" },
      "consentCode": "DS"
    },
    "NCU": {
      "title": "Future commercial use is prohibited",
      "type": "string",
      "enum": ["Yes", "No"],
      "consentCode": "NCU"
    },
    "NPU": {
      "title": "Future use by for-profit entities is prohibited",
      "type": "string",
      "enum": ["Yes", "No"],
      "consentCode": "NPU"
    },
    "NDMS": {
      "title": "Future use for methods research (analytic/software/technology development) outside the bounds of the other specified restrictions is prohibited",
      "type": "string",
      "enum": ["Yes", "No"],
      "consentCode": "NDMS"
    },
    "NAGR": {
      "title": "Future use of aggregate-level data for general research purposes is prohibited",
      "type": "string",
      "enum": ["Yes", "No", "Unspecified"],
      "consentCode": "NAGR"
    },
    "NCTRL": {
      "title": "Future use as a control set for diseases other than those specified is prohibited",
      "type": "string",
      "enum": ["Yes", "No"],
      "consentCode": "NCTRL"
    },
    "RS-G": {
      "title": "Future use is limited to research involving a particular gender",
      "type": "string",
      "enum": ["Male", "Female", "N/A"],
      "consentCode": "RS-G"
    },
    "RS-PD": {
      "title": "Future use is limited to pediatric research",
      "type": "string",
      "enum": ["Yes", "No"],
      "consentCode": "RS-PD"
    },
    "RS-POP": {
      "title": "Future use is limited to research involving a specific population",
      "type": "array",
      "items": { "type": "string" },
      "consentCode": "RS-POP"
    },
    "futureUseDate": {
      "title": "Future use is limited to data generated from samples collected after the following consent form date",
      "type": "string"
    },
    "orsp": {
      "type": "string"
    }
  },
  "consentCodes": {
    "GRU": "For health/medical/biomedical purposes and other biological research, including the study of population origins or ancestry.",
    "HMB": "Use of the data is limited to health/medical/biomedical purposes, does not include the study of population origins or ancestry.",
    "DS": "Use of the data must be related to a particular disease.",
    "NCU": "Use of the data is limited to non-commercial use.",
    "NPU": "Use of the data is limited to not-for-profit organizations.",
    "NDMS": "Use of the data includes methods development research (e.g., development of software or algorithms) ONLY within the bounds of other specified data use limitations.",
    "NAGR": "Use of the data includes aggregate level analysis to address research questions (e.g., determine variant frequencies across the general population) ONLY within the bounds of other specified data use limitations.",
    "NCTRL": "Data can be used as a control set ONLY within the bounds of other specified data use limitations (e.g. only for cancer studies).",
    "RS-G": "Use of the data is limited to studies of particular gender.",
    "RS-PD": "Use of the data is limited to pediatric research.",
    "RS-POP": "Use of the data is limited to studies of particular population."
  },
  "display": {
    "primary": ["indication", "numSubjects", "datatype", "dataUseRestriction"],
    "secondary": ["datasetName", "datasetDescription", "datasetCustodian", "datasetDepositor", "datasetOwner",
      "institute", "projectName", "reference", "dataFileFormats", "technology", "profilingProtocol",
      "dataUseBSPSampleCollectionID", "studyDesign", "cellType", "coverage", "ethnicity", "primaryDiseaseSite",
      "broadInternalResearchProjectID", "broadInternalResearchProjectName", "broadInternalCohortName",
      "broadInternalSeqProjectNumbers"]
  },
  "wizard":
  [
    {
      "title": "Define Data Set attributes",
      "questions":
      [
        {"property": "datasetName", "required": true},
        {"property": "datasetDescription", "required": true},
        {"property": "datasetCustodian", "inputHint": "e.g. Project Manager", "required": true},
        {"property": "datasetDepositor", "inputHint": "e.g. Project Manager", "required": true},
        {"property": "datasetOwner", "inputHint": "e.g. Prinicipal Investigator", "required": true},
        {"property": "institute", "required": true},
        {"property": "indication", "required": true},
        {"property": "numSubjects", "inputHint": "Number of participants the data maps to", "required": true},
        {"property": "projectName", "inputHint": "e.g. TCGA, TopMed, ExAC ; tag all relevant associated projects", "required": true},
        {"property": "datatype", "inputHint": "e.g. Whole Genome, Whole Exome, RNA-Seq ; tag all relevant", "required": true},
        {"property": "reference", "inputHint": "e.g. hg19, GRC38;  To which genome build the data was aligned, if relevant"},
        {"property": "dataFileFormats", "inputHint": "e.g. VCF, BAM; Tag all relevant"},
        {"property": "technology", "inputHint": "e.g. Illumina, 10X"},
        {"property": "profilingProtocol"},
        {"property": "dataUseRestriction", "required": true},
        {"property": "dataUseBSPSampleCollectionID"},
        {"property": "studyDesign", "inputHint": "e.g Case/Control, Trio, Tumor/normal, cases only - somatic,  cases only - germline, controls", "required": true},
        {"property": "cellType", "required": true},
        {"property": "coverage"},
        {"property": "ethnicity", "inputHint": "e.g. Caucasians, African-americans, Latino, East asians, South Asians, Finnish, Non-Finnish Europeans; check all relevant"},
        {"property": "primaryDiseaseSite"},
        {"property": "broadInternalResearchProjectID"},
        {"property": "broadInternalResearchProjectName"},
        {"property": "broadInternalCohortName"},
        {"property": "broadInternalSeqProjectNumbers", "inputHint": "Broad internal IDs"}
      ]
    },
    {
      "title": "Catalog structured Data Use Restrictions",
      "switch": {
        "title": "Choose one of the available options to define Data Use Restrictions:",
        "options":
        [
          {
            "title": "Set Data Use Restrictions by answering a questionnaire",
            "enumerate": true,
            "questions":
            [
              {"property": "GRU", "required": true},
              {"property": "HMB", "required": true},
              {"property": "DS"},
              {"property": "NCU", "required": true},
              {"property": "NPU", "required": true},
              {"property": "NDMS", "required": true},
              {"property": "NAGR", "required": true},
              {"property": "NCTRL", "required": true},
              {"property": "RS-G", "required": true},
              {"property": "RS-PD", "required": true},
              {"property": "RS-POP"},
              {"property": "futureUseDate", "renderHint": "date"}
            ]
          },
          {
            "title": "Retrieve Data Use Restrictions from Broad ORSP",
            "questions":
            [
              {"property": "orsp", "required": true, "renderHint": "text"}
            ]
          }
        ]
      }
    }
  ]
}

